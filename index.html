<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Aquiservicio</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --navy:#0b1220;
  --navy2:#0f1a33;
  --card:rgba(255,255,255,.94);
  --shadow:0 20px 70px rgba(2,6,23,.18);
  --r:22px;
}
*{box-sizing:border-box}
body{
margin:0;
font-family:Inter,system-ui;
background:
radial-gradient(900px 600px at 10% 0%, rgba(56,189,248,.14), transparent 60%),
radial-gradient(900px 600px at 90% 10%, rgba(99,102,241,.12), transparent 55%),
linear-gradient(180deg, var(--navy), var(--navy2));
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
padding:18px;
}
.shell{width:min(980px,100%)}
.card{
background:var(--card);
border-radius:calc(var(--r)+10px);
box-shadow:var(--shadow);
padding:24px;
text-align:center;
}

.logo{
max-width:420px;
width:90%;
margin:0 auto 18px;
display:block;
}

.welcome{
font-size:26px;
font-weight:900;
letter-spacing:.18em;
text-transform:uppercase;
background:linear-gradient(90deg,#38bdf8,#6366f1);
-webkit-background-clip:text;
color:transparent;
margin-bottom:16px;
animation: shimmer 3s infinite;
}
@keyframes shimmer{
0%,100%{filter:brightness(1)}
50%{filter:brightness(1.25)}
}

.selectWrap{
margin:16px auto;
max-width:380px;
}
select{
width:100%;
padding:14px;
border-radius:16px;
border:1px solid rgba(15,23,42,.12);
font-weight:900;
}

.btnGrid{
margin-top:20px;
display:grid;
gap:12px;
}

.bigBtn{
padding:16px;
border-radius:20px;
border:1px solid rgba(15,23,42,.10);
background:#fff;
font-weight:900;
font-size:16px;
cursor:pointer;
transition:.15s;
}
.bigBtn:hover{transform:translateY(-2px)}

.smallActions{
margin-top:18px;
display:flex;
gap:10px;
justify-content:center;
flex-wrap:wrap;
}

.miniBtn{
padding:10px 14px;
border-radius:999px;
border:1px solid rgba(15,23,42,.10);
background:#fff;
font-weight:800;
text-decoration:none;
color:#000;
font-size:13px;
}
</style>
</head>

<body>
<div class="shell">
<div class="card">

<img src="assets/logo.svg" class="logo">

<div class="welcome">BIENVENIDO</div>

<div class="selectWrap">
<select id="municipality">
<option>Cargando municipios...</option>
</select>
</div>

<div class="btnGrid">
<button class="bigBtn" onclick="go('comida.html')">üçî Comida</button>
<button class="bigBtn" onclick="go('servicios.html')">üîß Servicios</button>
<button class="bigBtn" disabled>üõí Marketplace (Pr√≥ximamente)</button>
</div>

<div class="smallActions">
<a href="registrar.html" class="miniBtn">Quiero anunciarme</a>
<a href="login.html" class="miniBtn">Iniciar sesi√≥n</a>
</div>

</div>
</div>

<script>
const select=document.getElementById("municipality");

async function loadMunicipios(){
const r=await fetch("/api/public_municipalities");
const out=await r.json();

select.innerHTML="";
(out.data||[]).forEach(m=>{
const o=document.createElement("option");
o.value=m.name;
o.textContent=m.available?m.name:m.name+" (Pr√≥ximamente)";
if(!m.available)o.disabled=true;
select.appendChild(o);
});

const saved=localStorage.getItem("aq_municipality");
if(saved&&[...select.options].some(o=>o.value===saved&&!o.disabled)){
select.value=saved;
}else{
select.selectedIndex=0;
}
}
loadMunicipios();

select.addEventListener("change",()=>{
localStorage.setItem("aq_municipality",select.value);
});

function go(page){
localStorage.setItem("aq_municipality",select.value);
window.location=page;
}
</script>

</body>
</html>
