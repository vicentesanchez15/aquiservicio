<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aquiservicio</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --navy:#0b1220;
      --navy2:#0f1a33;

      --txt:#0f172a;
      --mut:#64748b;

      --card:rgba(255,255,255,.94);
      --bd:rgba(15,23,42,.12);
      --glow:rgba(56,189,248,.22);
      --shadow:0 20px 70px rgba(2,6,23,.18);
      --r:20px;

      /* azul medianoche REAL (no negro) para BIENVENIDOS */
      --welcomeBlue:#123a7a;

      /* fondo del select m√°s oscuro (no azul brillante) */
      --selectBg:rgba(2,6,23,.05);
      --selectBd:rgba(15,23,42,.18);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--txt);
      background:
        radial-gradient(900px 600px at 10% 0%, rgba(56,189,248,.14), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(99,102,241,.12), transparent 55%),
        linear-gradient(180deg, var(--navy), var(--navy2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    .shell{width:min(980px, 100%);}
    .card{
      background: var(--card);
      border:1px solid rgba(255,255,255,.18);
      box-shadow: var(--shadow);
      border-radius: calc(var(--r) + 10px);
      overflow:hidden;
      backdrop-filter: blur(10px);
      animation: in .35s ease-out;
    }
    @keyframes in{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

    .main{padding:18px 12px 20px}

    .hero{
      text-align:center;
      padding:6px 8px 10px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }

    /* Logo centrado, un poquito a la izquierda por el ancho del SVG */
    .wordmark{
      width: min(520px, 86vw);
      height:auto;
      display:block;
      margin: 0 auto;
      transform: translateX(-10px);
    }

    /* MUNICIPIO */
    .municipalityBox{
      width:100%;
      max-width:560px;
      margin:0 auto;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      padding: 0 8px;
    }
    .municipalityBox label{
      font-size:13px;
      font-weight:900;
      color: rgba(15,23,42,.75);
      letter-spacing:.10em;
      text-transform:uppercase;
    }

    select{
      width:100%;
      max-width:100%;
      border-radius:16px;
      padding:12px 12px;
      border:1px solid var(--selectBd);
      background: var(--selectBg);
      color: rgba(15,23,42,.88);
      font-weight:900;
      outline:none;
      appearance:none;
    }
    select:focus{
      box-shadow:0 0 0 4px var(--glow);
      border-color: rgba(56,189,248,.35);
      background:#fff;
    }

    /* BIENVENIDOS (ANIMADO y PRO) */
    .welcome{
      margin:2px 0 0;
      font-weight:900;
      letter-spacing: .22em;
      font-size: 22px;
      color: var(--welcomeBlue);
      text-transform: uppercase;
      animation: welcomeFloat 2.4s ease-in-out infinite;
    }
    @keyframes welcomeFloat{
      0%,100%{ transform:translateY(0); }
      50%{ transform:translateY(-4px); }
    }

    .subtitle{
      margin:0;
      color: rgba(15,23,42,.72);
      font-size:14.5px;
      line-height:1.45;
      font-weight:650;
    }

    /* Botones grandes centrados */
    .btnGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin-top:16px;
      justify-items:center;
    }
    @media (min-width:720px){ .btnGrid{grid-template-columns:1fr 1fr 1fr;} }

    .bigBtn{
      width:100%;
      max-width:520px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:16px 16px;
      border-radius:22px;
      border:1px solid rgba(15,23,42,.10);
      text-decoration:none;
      color:var(--txt);
      background: #fff;
      box-shadow: 0 14px 40px rgba(2,6,23,.10);
      transition: transform .12s ease, box-shadow .12s ease;
      user-select:none;
    }
    .bigBtn:hover{transform:translateY(-1px); box-shadow: 0 18px 55px rgba(2,6,23,.14);}
    .bigBtn:active{transform:scale(.99);}

    .bigBtn .l{display:flex;flex-direction:column;gap:3px}
    .bigBtn .t{font-weight:900;font-size:16px;letter-spacing:.2px}
    .bigBtn .s{font-weight:650;font-size:13px;color: rgba(15,23,42,.60)}
    .bigBtn .arrow{font-weight:900;opacity:.75}

    .bigBtn.primary{
      background: linear-gradient(180deg, rgba(56,189,248,.16), rgba(99,102,241,.10));
      border-color: rgba(56,189,248,.35);
    }
    .bigBtn.disabled{
      opacity:.55;
      pointer-events:none;
      background: linear-gradient(180deg, rgba(15,23,42,.04), rgba(15,23,42,.02));
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
      border:1px solid rgba(15,23,42,.10);
      background:#fff;
      color: rgba(15,23,42,.72);
      width: fit-content;
      margin-top:6px;
    }

    /* Acciones chicas + texto arriba (para que no se vea b√°sico) */
    .smallArea{
      margin-top:14px;
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      max-width:860px;
      margin-left:auto;
      margin-right:auto;
    }
    @media (min-width:720px){ .smallArea{grid-template-columns:1fr 1fr 1fr;} }

    .actionCard{
      background:#fff;
      border:1px solid rgba(15,23,42,.10);
      border-radius:20px;
      padding:12px;
      box-shadow: 0 12px 30px rgba(2,6,23,.06);
      text-align:center;
    }
    .actionTop{
      font-weight:900;
      color: rgba(15,23,42,.78);
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:11px;
      margin-bottom:8px;
    }

    .miniBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:100%;
      border:1px solid rgba(15,23,42,.10);
      background:#fff;
      border-radius:999px;
      padding:11px 14px;
      font-weight:900;
      font-size:13px;
      text-decoration:none;
      color:var(--txt);
      transition: transform .12s ease, box-shadow .12s ease;
      box-shadow: 0 10px 22px rgba(2,6,23,.06);
    }
    .miniBtn:hover{transform:translateY(-1px); box-shadow: 0 14px 28px rgba(2,6,23,.10);}
    .miniBtn:active{transform:scale(.99)}
    .miniBtn.primary{
      background: linear-gradient(180deg, rgba(2,6,23,.06), rgba(2,6,23,.02));
    }

    /* Reglas */
    .rules{
      margin-top:16px;
      border-radius: 22px;
      border:1px solid rgba(56,189,248,.35);
      background: linear-gradient(180deg, rgba(56,189,248,.10), rgba(99,102,241,.06));
      padding:16px;
      color: rgba(15,23,42,.86);
      font-size:14px;
      line-height:1.55;
      max-width: 860px;
      margin-left:auto;
      margin-right:auto;
      text-align:left;
    }
    .rules h3{
      margin:0;
      font-size:16px;
      font-weight:900;
      text-align:center;
      letter-spacing:.18em;
      text-transform:uppercase;
    }
    .rules .subh{
      margin:6px 0 8px;
      font-size:12px;
      font-weight:900;
      text-align:center;
      color: rgba(15,23,42,.65);
    }
    .rules b{color:rgba(15,23,42,.98)}
    .rules ul{margin:10px 0 0; padding-left:18px}
    .rules li{margin:7px 0}

    .foot{
      margin-top:12px;
      text-align:center;
      font-size:12px;
      color: rgba(255,255,255,.65);
      font-weight:700;
    }
  </style>
</head>

<body>
  <div class="shell">
    <div class="card">
      <div class="main">

        <div class="hero">
          <img class="wordmark" src="assets/logo.svg" alt="aquiservicio.com">

          <div class="municipalityBox">
            <label for="city">MUNICIPIO</label>
            <select id="city" disabled>
              <option>Cargando municipios‚Ä¶</option>
            </select>
          </div>

          <p class="welcome">BIENVENIDOS</p>

          <p class="subtitle">
            Selecciona lo que buscas: <b>Comida</b>, <b>Servicios</b> o <b>Marketplace</b>.
          </p>
        </div>

        <div class="btnGrid">
          <a class="bigBtn primary" href="comida.html">
            <div class="l">
              <div class="t">üçî Comida</div>
              <div class="s">Lo m√°s buscado y verificado</div>
            </div>
            <div class="arrow">‚Üí</div>
          </a>

          <a class="bigBtn primary" href="servicios.html">
            <div class="l">
              <div class="t">üîß Servicios</div>
              <div class="s">Plomer√≠a, mec√°nico, taxis‚Ä¶</div>
            </div>
            <div class="arrow">‚Üí</div>
          </a>

          <a class="bigBtn disabled" href="marketplace.html" aria-disabled="true">
            <div class="l">
              <div class="t">üõí Marketplace</div>
              <div class="s">Pr√≥ximamente</div>
              <div class="tag">En proceso</div>
            </div>
            <div class="arrow">‚Üí</div>
          </a>
        </div>

        <!-- Acciones pro (con texto arriba) -->
        <div class="smallArea">
          <div class="actionCard">
            <div class="actionTop">¬øQUIERES ANUNCIARTE?</div>
            <a class="miniBtn primary" href="registrar.html">‚ûï Registrar mi negocio</a>
          </div>

          <div class="actionCard">
            <div class="actionTop">YA EST√ÅS APROBADO</div>
            <a class="miniBtn" href="login.html">üîê Iniciar sesi√≥n</a>
          </div>

          <div class="actionCard">
            <div class="actionTop">¬øNO ENCONTRASTE LO QUE BUSCAS?</div>
            <a class="miniBtn" href="no-encontre.html">üí° Sugerencias</a>
          </div>
        </div>

        <div class="rules">
          <h3>REGLAS</h3>
          <div class="subh">(para mantener la calidad)</div>
          <ul>
            <li><b>Publicaci√≥n sujeta a revisi√≥n</b>: se publica solo si cumple reglas.</li>
            <li><b>Pago al recibir</b> (si aplica): al entregar o al recoger, seg√∫n el negocio.</li>
            <li><b>Datos reales</b>: WhatsApp/tel√©fono v√°lidos y nombre claro.</li>
            <li><b>No enga√±os</b>, <b>no suplantaci√≥n</b>, <b>no contenido ofensivo</b>.</li>
            <li><b>Horarios honestos</b>: si son falsos o repetidamente fallan, se baja el perfil.</li>
            <li><b>Reclamar negocio</b> requiere comprobaci√≥n.</li>
            <li><b>Marketplace</b> est√° <b>en proceso</b>: a√∫n no disponible.</li>
          </ul>
        </div>

      </div>
    </div>

    <div class="foot">Aquiservicio ‚Ä¢ Hecho para Sinaloa</div>
  </div>

  <script>
    const citySelect = document.getElementById("city");

    function option(label, value, disabled=false){
      const o = document.createElement("option");
      o.textContent = label;
      o.value = value;
      o.disabled = disabled;
      return o;
    }

    async function loadMunicipalities(){
      try{
        const r = await fetch("/api/municipalities", { method:"GET" });
        const out = await r.json();

        citySelect.innerHTML = "";
        const list = (out && out.data) ? out.data : [];

        // fallback si falla la API
        if(!list.length){
          citySelect.appendChild(option("Navolato (Disponible)", "Navolato", false));
          citySelect.appendChild(option("Culiac√°n (Pr√≥ximamente)", "Culiac√°n", true));
          citySelect.disabled = false;
          return;
        }

        const saved = localStorage.getItem("aq_city");

        // Regla: hoy solo Navolato disponible
        for(const m of list){
          const name = (m && m.name) ? m.name : "";
          const isNav = name.toLowerCase().includes("navolato");
          citySelect.appendChild(option(
            isNav ? `${name} (Disponible)` : `${name} (Pr√≥ximamente)`,
            name,
            !isNav
          ));
        }

        if(saved && [...citySelect.options].some(o => o.value === saved && !o.disabled)){
          citySelect.value = saved;
        } else {
          const firstOk = [...citySelect.options].find(o => !o.disabled);
          citySelect.value = firstOk ? firstOk.value : citySelect.options[0].value;
        }

        localStorage.setItem("aq_city", citySelect.value);
        citySelect.disabled = false;

        citySelect.addEventListener("change", () => {
          localStorage.setItem("aq_city", citySelect.value);
        });

      }catch(_){
        citySelect.innerHTML = "";
        citySelect.appendChild(option("Navolato (Disponible)", "Navolato", false));
        citySelect.appendChild(option("Culiac√°n (Pr√≥ximamente)", "Culiac√°n", true));
        citySelect.disabled = false;
      }
    }

    loadMunicipalities();
  </script>
</body>
</html>
